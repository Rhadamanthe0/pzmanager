# Sudoers configuration for pzuser (daily maintenance automation)
# Installation: sudo visudo -cf /etc/sudoers.d/pzuser && sudo cp pzuser-sudoers /etc/sudoers.d/pzuser

# APT package management (specific commands only)
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get update -qq
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get upgrade -y -qq
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get install -y -qq openjdk-21-jre-headless
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get install -y -qq openjdk-17-jre-headless
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get autoremove -y -qq
pzuser ALL=(ALL) NOPASSWD: /usr/bin/apt-get autoclean -qq

# Java JRE symlink management (exact paths only)
pzuser ALL=(ALL) NOPASSWD: /bin/rm -f /home/pzuser/pzmanager/data/pzserver/jre64
pzuser ALL=(ALL) NOPASSWD: /bin/rm -rf /home/pzuser/pzmanager/data/pzserver/jre64
pzuser ALL=(ALL) NOPASSWD: /bin/ln -s /usr/lib/jvm/java-21-openjdk-amd64 /home/pzuser/pzmanager/data/pzserver/jre64
pzuser ALL=(ALL) NOPASSWD: /bin/ln -s /usr/lib/jvm/java-17-openjdk-amd64 /home/pzuser/pzmanager/data/pzserver/jre64

# Backup: read-only access to sudoers config
pzuser ALL=(ALL) NOPASSWD: /bin/cat /etc/sudoers.d/pzuser

# System reboot (no arguments allowed)
pzuser ALL=(ALL) NOPASSWD: /sbin/reboot ""
