#!/bin/bash
# ------------------------------------------------------------------------------
# .env.example - Centralized configuration template for all scripts
# ------------------------------------------------------------------------------
# Usage: This file will be automatically copied to .env on first script run
#
# This file contains all environment variables shared by the Project Zomboid
# server management scripts.
# ------------------------------------------------------------------------------

# === Users and base paths ===
export PZ_USER="pzuser"
export PZ_HOME="/home/${PZ_USER}"
export PZ_MANAGER_DIR="${PZ_HOME}/pzmanager"
export PZ_SCRIPTS_DIR="${PZ_MANAGER_DIR}/scripts"
export PZ_DATA_DIR="${PZ_MANAGER_DIR}/data"

# === Project Zomboid server ===
export PZ_INSTALL_DIR="${PZ_DATA_DIR}/pzserver"
export PZ_CONTROL_PIPE="${PZ_INSTALL_DIR}/zomboid.control"
export PZ_JRE_LINK="${PZ_INSTALL_DIR}/jre64"
export PZ_SERVICE_NAME="zomboid.service"
export PZ_SOURCE_DIR="${PZ_MANAGER_DIR}/Zomboid"

# === Network ports ===
# Ports du serveur PZ (à changer si plusieurs serveurs sur la même machine)
export PZ_PORT_GAME=16261
export PZ_PORT_GAME2=16262
export PZ_PORT_RCON=8766
export PZ_PORT_STEAM=27015

# === SteamCMD ===
export STEAMCMD_PATH="/usr/games/steamcmd"
export STEAM_APP_ID="380870"
export STEAM_BETA_BRANCH="legacy_41_78_7"

# === Java JRE ===
export JAVA_VERSION="25"
export JAVA_PACKAGE="openjdk-${JAVA_VERSION}-jre-headless"
export JAVA_PATH="/usr/lib/jvm/java-${JAVA_VERSION}-openjdk-amd64"

# === Backups ===
export BACKUP_DIR="${PZ_DATA_DIR}/dataBackups"
export BACKUP_LATEST_LINK="${BACKUP_DIR}/latest"
export BACKUP_RETENTION_DAYS=14

# === External synchronization ===
export SYNC_BACKUPS_DIR="${PZ_DATA_DIR}/fullBackups"

# === Logs ===
export LOG_BASE_DIR="${PZ_SCRIPTS_DIR}/logs"
export LOG_ZOMBOID_DIR="${LOG_BASE_DIR}/zomboid"
export LOG_MAINTENANCE_DIR="${LOG_BASE_DIR}/maintenance"
export LOG_RETENTION_DAYS=30

# === Whitelist ===
export WHITELIST_PURGE_DAYS=60

# === Maintenance ===
export REBOOT_ON_MAINTENANCE=true   # Redémarrer la machine après maintenance (false = restart service uniquement)
export REPLACE_JRE=true             # Remplacer le JRE embarqué par celui du système (false pour B42+)

# === Discord (Optional) ===
# To enable Discord notifications, create a webhook in your Discord server:
# Server Settings → Integrations → Webhooks → New Webhook
# Then paste the webhook URL below (remove the # to uncomment)
export DISCORD_WEBHOOK=""
